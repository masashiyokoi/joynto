<p id="notice"><%= notice %></p>

<p>
  <strong>Type:</strong>
  <%= @message.type %>
</p>

<p>
  <strong>Content:</strong>
  <%= md_to_html(@message.content) %>
  <%= @message.created_at %>
</p>

<p>
  <% if @message.image? %>
    <% if @message.image.file.content_type.include?('image/') %>
    <%= image_tag @message.image.url, width: '100%' if @message.image.present? %>
    <% else %>
      <%= video_tag @message.image.url, width: "50%",
                    controls: true, autobuffer: true %>
    <% end %>
  <% end %>
</p>

<p>
  <% @message.votes_for.up.by_type(User).voters.each do |voter| %>
  <p><%= link_to voter.name, user_path(voter) %></p>
  <% end %>
</p>
<% if user_signed_in? %>
  <%= link_to 'Like', like_message_path(@message), method: :put %>
  <%= link_to 'unvote', unvote_message_path(@message), method: :put %>
  <% if current_user?(@message.user) %>
  <%= link_to 'Edit', edit_message_path(@message) %>
  <%= link_to 'Destroy', @message, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %>
<% end %>
<%= link_to 'Back', messages_path %>
